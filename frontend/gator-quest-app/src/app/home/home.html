<div class="container" [ngClass]="{'no-scroll': currentState === 'gameover' || currentState === 'event'}">
    <header class="header">
        <p class="title">Gator Quest</p>
        <div class="profile-wrapper">
            <i class="pi pi-user profile-icon" (click)="onProfileClick()"></i>
            <div *ngIf="showProfileMenu" class="profile-menu">
                <button class="logout-btn" (click)="onLogout()">
                    <i class="pi pi-sign-out"></i>
                    Logout
                </button>
            </div>
        </div>
    </header>
    <div class="component menu-container">
        <app-menu [player]="player">
        </app-menu>
    </div>
    <div class="component textbox-container">
        <app-text-box 
            [currentStory]="currentStory"
            (choiceSelected)="updatePlayerStats($event)"
            (startRequested)="onStart()"
            (advanceRequested)="getNextStory()"
            (gameOver)="handleGameOver($event.message, $event.status)">
        </app-text-box>
        
        <!-- Event Screen -->
        <div *ngIf="currentState === 'event'" class="event-screen">
            <div class="event-content">
                <h2>Random Event!</h2>
                <p class="event-text">{{ eventMessage }}</p>
                <button class="next-button" (click)="onEventNext()">Next</button>
            </div>
        </div>
        
        <!-- Game Over Screen -->
        <div *ngIf="currentState === 'gameover'" class="game-over-screen">
            <div class="game-over-content">
                <h1 [ngClass]="{'game-won': gameStatus === 'graduated', 'game-lost': gameStatus === 'failed'}">
                    {{ gameOverMessage }}
                </h1>
                <div class="final-stats">
                    <p><strong>Final GPA:</strong> {{ player.gpa.toFixed(2) }}</p>
                    <p><strong>Final Energy:</strong> {{ player.energy }}</p>
                    <p><strong>Social Score:</strong> {{ player.social }}</p>
                </div>
                <button class="restart-button" (click)="onStart()">Play Again</button>
            </div>
        </div>
    </div>
</div>

